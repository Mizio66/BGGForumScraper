<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>BGG Rules Extractor</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <header class="hdr">
      <div class="logo">R</div>
      <div class="title">
        <div class="name">BGG Rules Extractor</div>
        <div class="game" id="gameTitle">Detecting…</div>
      </div>
    </header>

    <section class="status-grid">
      <div class="status ok" id="statusGame">
        <div class="s-title">Game</div>
        <div class="s-msg" id="statusGameMsg">—</div>
      </div>
      <div class="status ok" id="statusForum">
        <div class="s-title">Rules forum</div>
        <div class="s-msg" id="statusForumMsg">—</div>
      </div>
      <div class="status warn" id="statusAuth">
        <div class="s-title">Auth</div>
        <div class="s-msg" id="statusAuthMsg">Not connected</div>
      </div>
      <div class="status info" id="statusThreads">
        <div class="s-title">Threads</div>
        <div class="s-msg" id="statusThreadsMsg">0</div>
      </div>
    </section>

    <section class="actions">
      <button id="connectBtn" class="btn primary">Connect Google Drive</button>
      <button id="chooseFolderBtn" class="btn">Choose folder</button>
      <button id="extractBtn" class="btn" disabled>Extract & Save</button>
    </section>

    <section class="chosen" id="chosenFolder">
      <div class="label">Destination:</div>
      <div id="folderPath">My Drive (root)</div>
    </section>

    <section class="progress">
      <div class="bar"><div id="pbar"></div></div>
      <div class="ptext" id="ptext">Idle</div>
    </section>

    <section class="log" id="log"></section>

    <footer class="ftr">
      <a href="#" id="settingsLink">Settings</a>
      <a href="#" id="helpLink">Help</a>
    </footer>
  </div>

  <!-- Folder browser modal (opens only when user clicks Choose folder) -->
  <div class="modal" id="folderModal" hidden>
    <div class="modal-card">
      <div class="modal-hdr">
        <div>Choose destination folder</div>
        <button id="closeModal" class="xbtn" title="Close">×</button>
      </div>
      <div class="crumbs" id="crumbs">My Drive</div>
      <div class="modal-body">
        <div class="list" id="folderList">Loading…</div>
      </div>
      <div class="modal-actions">
        <input type="text" id="newFolderName" placeholder="New folder name">
        <button class="btn" id="createFolderBtn">Create</button>
        <div class="spacer"></div>
        <button class="btn primary" id="selectThisFolderBtn">Select this folder</button>
      </div>
    </div>
  </div>

  <script type="module" src="popup.js"></script>
</body>
</html>